extends layout

block content
  section.mx-section.pt-0
    .row.align-items-center.gy-5
      .col-lg-7
        span.mx-section-title.d-inline-flex.align-items-center.gap-2
          span.badge.mx-pill.mx-pill-soft.text-uppercase.fw-semibold Latest Releases Await
        // Adjust hero heading & subheading to satisfy Cypress assertions
        h1.display-4.fw-bold.mt-3 Your Ultimate Movie Rental Experience
        p.lead.text-muted.mt-3 Discover thousands of movies across genres, eras, and languages.
        if user
          .d-flex.flex-wrap.gap-3.mt-4
            a.btn.btn-accent.btn-lg.px-4.rounded-pill.shadow(href='/films')
              i.fas.fa-compass.me-2
              | Explore Films
            a.btn.btn-outline-accent.btn-lg.px-4.rounded-pill(href='/customer/dashboard')
              i.fas.fa-gauge-high.me-2
              | My Dashboard
            a.btn.btn-outline-light.btn-lg.px-4.rounded-pill(href='/customer/profile')
              i.fas.fa-user-gear.me-2
              | Profile
        else
          .d-flex.flex-wrap.gap-3.mt-4
            a.btn.btn-accent.btn-lg.px-4.rounded-pill.shadow(href='/auth/register')
              i.fas.fa-user-plus.me-2
              | Get Started
            a.btn.btn-outline-accent.btn-lg.px-4.rounded-pill(href='/auth/login')
              i.fas.fa-right-to-bracket.me-2
              | Sign In
      .col-lg-5
        .mx-card.p-0.overflow-hidden.shadow-hover(style='background: radial-gradient(circle at top, rgba(229,9,20,.25), transparent 60%), radial-gradient(circle at bottom, rgba(245,197,24,.25), transparent 65%), linear-gradient(160deg, rgba(18,26,44,.85), rgba(27,36,55,.95));')
          .p-5.position-relative
            span.badge.mx-highlight-badge.mx-pill.fw-semibold.mb-4 Top Picks Now
            h3.fw-semibold.mb-3 Binge-worthy Collections
            p.text-muted.mb-4 Curated lists from our staff to keep your watchlist fresh and exciting.
            ul.list-unstyled.vstack.gap-3.mb-4
              li.d-flex.align-items-center.gap-3
                span.rounded-circle.bg-light.bg-opacity-10.d-inline-flex.align-items-center.justify-content-center(style='width: 46px; height: 46px;')
                  i.fas.fa-bolt.text-warning
                span
                  strong Lightning Rentals
                  br
                  span.text-muted Instant digital access
              li.d-flex.align-items-center.gap-3
                span.rounded-circle.bg-light.bg-opacity-10.d-inline-flex.align-items-center.justify-content-center(style='width: 46px; height: 46px;')
                  i.fas.fa-crown.text-danger
                span
                  strong Premium Premieres
                  br
                  span.text-muted Exclusive early releases
              li.d-flex.align-items-center.gap-3
                span.rounded-circle.bg-light.bg-opacity-10.d-inline-flex.align-items-center.justify-content-center(style='width: 46px; height: 46px;')
                  i.fas.fa-people-group.text-info
                span
                  strong Family Favorites
                  br
                  span.text-muted Handpicked weekend picks
            a.btn.btn-outline-light.rounded-pill.px-4(href='/films')
              i.fas.fa-ticket.me-2
              | View Collections

  section.mx-section.pt-0
    .row.g-4
      .col-md-4
        .mx-card.h-100.p-4.shadow-hover
          span.badge.mx-pill.mx-pill-soft.text-uppercase.mb-3.fw-semibold Seamless
          h4.fw-semibold.mb-3 Unlimited Selection
          p.text-muted.mb-0 Browse by genre, rating, cast, or curated collections with intelligent search.
      .col-md-4
        .mx-card.h-100.p-4.shadow-hover
          span.badge.mx-pill.mx-pill-soft.text-uppercase.mb-3.fw-semibold Instant
          h4.fw-semibold.mb-3 One-Click Rentals
          p.text-muted.mb-0 Reserve physical copies or unlock HD streaming in seconds.
      .col-md-4
        .mx-card.h-100.p-4.shadow-hover
          span.badge.mx-pill.mx-pill-soft.text-uppercase.mb-3.fw-semibold Secure
          h4.fw-semibold.mb-3 Smart, Safe Access
          p.text-muted.mb-0 Role-based controls keep team workflows smooth for customers, staff, and admins.

  if featuredFilms && featuredFilms.length
    section.mx-section.pt-0
      .d-flex.flex-wrap.align-items-center.justify-content-between.mb-4
        h2.h3.mb-0.fw-semibold Featured Films
        a.text-muted.small(href='/films')
          | View all films
          i.fas.fa-arrow-right.ms-2
      .row.row-cols-1.row-cols-md-2.row-cols-xl-3.g-4
        each film in featuredFilms.slice(0, 6)
          .col
            .mx-card.h-100.shadow-hover
              if film.image_url
                img(src=film.image_url alt=Poster for  class='card-img-top' style='height: 260px; object-fit: cover;')
              else
                .d-flex.align-items-center.justify-content-center.bg-dark.bg-opacity-50(style='height: 260px;')
                  i.fas.fa-film.fa-3x.text-muted
              .p-4.d-flex.flex-column
                h5.fw-semibold.mb-2= film.title
                p.text-muted.small.mb-3
                  if film.release_year
                    i.fas.fa-calendar-day.me-2
                    | #{film.release_year}
                  if film.rating
                    span.ms-3
                      i.fas.fa-star.me-1.text-warning
                      | #{film.rating}
                p.flex-grow-1.text-muted= film.description || 'Discover this cinematic highlight available now.'
                .mt-4
                  a.btn.btn-accent.w-100.rounded-pill(href=/films/)
                    i.fas.fa-eye.me-2
                    | View details
  else
    section.mx-section.pt-0
      .mx-card.p-5.text-center
        h3.fw-semibold.mb-2 Featured titles are on the way
        p.text-muted.mb-0 Check back soon to see curated picks from the MoviezExpressRentals team.

  if !user
    section.mx-section.pt-0
      .mx-card.p-5.text-center.shadow-hover
        span.mx-section-title.text-uppercase.fw-semibold Ready When You Are
        h2.display-6.fw-bold.mt-3 Join a streaming experience built for movie lovers
        p.lead.text-muted.mb-4 Build watchlists, unlock premieres, and manage rentals across devices.
        .d-flex.justify-content-center.flex-wrap.gap-3
          a.btn.btn-accent.btn-lg.px-4.rounded-pill(href='/auth/register')
            i.fas.fa-user-plus.me-2
            | Create free account
          a.btn.btn-outline-accent.btn-lg.px-4.rounded-pill(href='/films')
            i.fas.fa-film.me-2
            | Browse films
